(()=>{var e={};e.id=697,e.ids=[697],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},84219:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>P,routeModule:()=>h,serverHooks:()=>x,workAsyncStorage:()=>y,workUnitAsyncStorage:()=>m});var a={};t.r(a),t.d(a,{POST:()=>l});var o=t(96559),s=t(48088),n=t(37719),i=t(32190);let p=process.env.PAYPAL_CLIENT_ID,c=process.env.PAYPAL_SECRET,u="https://api-m.sandbox.paypal.com";async function d(){let e=Buffer.from(`${p}:${c}`).toString("base64"),r=await fetch(`${u}/v1/oauth2/token`,{method:"POST",headers:{Authorization:`Basic ${e}`,"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials"}),t=await r.json();if(!r.ok)throw Error(t.error_description||"Failed to get PayPal access token");return t.access_token}async function l(e){try{let{amount:r,currency:t}=await e.json(),a=await d(),o=await fetch(`${u}/v2/checkout/orders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({intent:"CAPTURE",purchase_units:[{amount:{currency_code:t||"USD",value:(r/100).toFixed(2)},payee:{email_address:process.env.FROM_EMAIL}}],application_context:{brand_name:"Vroom Visions",user_action:"PAY_NOW",return_url:"http://localhost:5000/payment-success",cancel_url:"http://localhost:5000/checkout"}})}),s=await o.json();if(!o.ok)throw Error(s.message||"Failed to create PayPal order");let n=s.links.find(e=>"approve"===e.rel)?.href;return i.NextResponse.json({id:s.id,approvalUrl:n})}catch(r){let e=r instanceof Error?r.message:"Failed to create PayPal order";return i.NextResponse.json({message:e},{status:500})}}let h=new o.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/paypal/create-order/route",pathname:"/api/paypal/create-order",filename:"route",bundlePath:"app/api/paypal/create-order/route"},resolvedPagePath:"/workspaces/OneVisions/src/app/api/paypal/create-order/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:y,workUnitAsyncStorage:m,serverHooks:x}=h;function P(){return(0,n.patchFetch)({workAsyncStorage:y,workUnitAsyncStorage:m})}},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[447,580],()=>t(84219));module.exports=a})();