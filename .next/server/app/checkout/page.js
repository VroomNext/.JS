(()=>{var e={};e.id=279,e.ids=[279],e.modules={1812:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(60687),a=r(43210),o=r(16189);let i=(0,r(62688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var n=r(29523);let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("input",{ref:r,className:"px-4 py-2 rounded border border-gray-300 bg-transparent text-white focus:outline-none focus:ring-2 focus:ring-purple-500 "+(e||""),...t}));l.displayName="Input";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("label",{ref:r,className:"block text-sm font-medium text-white "+(e||""),...t}));d.displayName="Label";let c=({style:e})=>(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:14,height:14,padding:0,overflow:"visible"},children:(0,s.jsx)("img",{src:"/attached_assets/razorpay-icon.png",alt:"Razorpay Logo",style:{height:100,maxWidth:"none",display:"inline",verticalAlign:"middle",...e}})}),p=({style:e})=>(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:14,height:14,padding:0,overflow:"visible"},children:(0,s.jsx)("img",{src:"/attached_assets/PayPal-Logo.wine.png",alt:"PayPal Logo",style:{height:70,maxWidth:"none",...e}})});var u=r(28253),m=r(26001),h=r(43532);let x=()=>{let e=(0,o.useRouter)(),{cart:t,removeFromCart:r,getTotalPrice:x}=(0,u._)(),[b,f]=(0,a.useState)(""),[y,g]=(0,a.useState)("idle"),[v,w]=(0,a.useState)(""),[j,N]=(0,a.useState)(!1),[k,P]=(0,a.useState)(null),[z,S]=(0,a.useState)(!1),[_,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{C(!0)},[]),(0,a.useEffect)(()=>{_&&0===t.length&&e.push("/products")},[_,t.length,e]);let A=e=>{r(e)},I=10*!!z,O=x(),R=Math.round(85.85*O),E=Math.round(I/100*O),U=Math.round(I/100*R),T=O-E,D=R-U,q=(O/100).toFixed(2),F=(E/100).toFixed(2),M=(T/100).toFixed(2),$=()=>new Promise(e=>{if(document.getElementById("razorpay-script"))return e(!0);let t=document.createElement("script");t.id="razorpay-script",t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>e(!0),t.onerror=()=>e(!1),document.body.appendChild(t)}),V=e=>/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e),L=async()=>{if(!b||!V(b))return void alert("Please enter a valid email address.");if(g("processing"),!await $()){alert("Failed to load Razorpay SDK."),g("idle");return}try{let e=await fetch("/api/razorpay/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:D,currency:"INR",receipt:`receipt_${Date.now()}`,email:b})}),r=await e.json();if(!e.ok)throw Error(r.message||"Order creation failed");let s={key:process.env.NEXT_PUBLIC_RAZORPAY_KEY_ID||"rzp_test_myXHywY5WTMuIg",amount:r.amount,currency:r.currency,name:"Vroom Visions",description:"Product Purchase",order_id:r.id,handler:async function(e){console.log("Razorpay payment success handler called",e);try{console.log("Sending invoice email..."),await fetch("/api/razorpay/invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:b,amount:r.amount,currency:r.currency,product:t.map(e=>e.product.name).join(", "),invoiceId:r.id,paymentMethod:"Razorpay"})}),console.log("Invoice email sent!")}catch(e){console.error("Invoice email error:",e)}window.location.href=`/payment-success?email=${encodeURIComponent(b)}`},prefill:{email:b},theme:{color:"#a259ff"}};new window.Razorpay(s).open()}catch(e){alert(e.message||"Payment could not be processed"),g("idle")}},Z=async()=>{if(!b||!V(b))return void alert("Please enter a valid email address.");g("processing");try{let e=await fetch("/api/paypal/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:T,currency:"USD",email:b})}),t=await e.json();if(!e.ok)throw Error(t.message||"Order creation failed");if(t.approvalUrl)window.location.href=t.approvalUrl;else throw Error("PayPal approval URL not received")}catch(e){alert(e.message||"Payment could not be processed"),g("idle")}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"fixed inset-0 z-[-1]",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/40 z-[1]"}),(0,s.jsxs)("video",{className:"absolute top-0 left-0 min-w-full min-h-full object-cover opacity-80",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,children:[(0,s.jsx)("source",{src:"/videos/blackhole.webm",type:"video/webm"}),"Your browser does not support the video tag."]})]}),(0,s.jsx)(h.A,{})]}),(0,s.jsx)(m.P.section,{className:"relative py-16",style:{marginTop:44},initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:(0,s.jsx)("div",{className:"container mx-auto px-4 relative z-10",children:0===t.length?null:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsxs)("div",{className:"bg-purple-900/20 backdrop-blur-md p-6 rounded-lg shadow-glow border border-white/10 sticky top-20",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Order Summary"}),(0,s.jsx)("div",{className:"border-b border-white/10 pb-4 mb-4",children:t.map(e=>(0,s.jsxs)("div",{className:"flex mb-4 p-2 rounded-lg bg-purple-950/40 backdrop-blur-sm border border-white/5",children:[(0,s.jsx)("img",{src:Array.isArray(e.product.imageUrl)?e.product.imageUrl[0]:e.product.imageUrl,alt:e.product.name,className:"w-20 h-20 rounded object-cover border border-white/10"}),(0,s.jsxs)("div",{className:"ml-3 flex-1",children:[(0,s.jsx)("h3",{className:"font-medium",children:e.product.name}),(0,s.jsxs)("div",{className:"font-medium mt-1 text-white",children:["$",(e.product.price*e.quantity/100).toFixed(2)," USD"]})]}),(0,s.jsx)("button",{className:"ml-auto text-gray-400 hover:text-white hover:bg-red-500/20 p-1 rounded-full transition-colors",onClick:()=>A(e.product.id),children:(0,s.jsx)(i,{size:16})})]},e.product.id))}),(0,s.jsxs)("div",{className:"space-y-2 text-sm mb-4 p-3 rounded-lg bg-purple-950/40 backdrop-blur-sm border border-white/5",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Subtotal"}),(0,s.jsxs)("span",{className:"font-medium",children:["$",q," USD"]})]}),z&&(0,s.jsxs)("div",{className:"flex justify-between text-green-400",children:[(0,s.jsx)("span",{children:"Discount (10%)"}),(0,s.jsxs)("span",{children:["- $",F," USD"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Taxes"}),(0,s.jsx)("span",{children:"Calculated at next step"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between font-bold text-lg p-3 rounded-lg bg-purple-950/40 backdrop-blur-sm border border-white/5 mt-4",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{className:"text-white",children:["$",z?M:q," USD"]})]}),(0,s.jsx)("div",{className:"mt-4 text-xs text-gray-400",children:"By confirming your payment, you allow VroomVisionX LLC to charge you for this payment and future payments in accordance with their terms."})]})}),(0,s.jsx)("div",{className:"md:col-span-1 space-y-6",children:(0,s.jsxs)("div",{className:"bg-purple-900/20 backdrop-blur-md p-6 rounded-lg shadow-glow border border-white/10",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Contact Information"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(d,{htmlFor:"checkout-email",className:"block text-sm font-medium mb-1",children:"Email"}),(0,s.jsx)(l,{type:"email",id:"checkout-email",placeholder:"your@email.com",className:"w-full bg-purple-950/40 backdrop-blur-md border border-white/10 rounded-md px-4 py-2 focus:border-purple-500/50 shadow-glow focus:bg-purple-950/40",value:b,onChange:e=>{f(e.target.value),g("idle")}})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(d,{htmlFor:"discount-code",className:"block text-sm font-medium mb-1",children:"Discount Code"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(l,{type:"text",id:"discount-code",placeholder:"Enter code",className:"flex-1 bg-purple-950/40 backdrop-blur-md border border-white/10 rounded-md px-4 py-2 focus:border-purple-500/50 shadow-glow",value:v,onChange:e=>w(e.target.value)}),(0,s.jsx)(n.$,{className:"bg-purple-600/70 hover:bg-purple-600 text-white px-4 py-2 rounded-md shadow-glow border border-white/10",onClick:async()=>{P(null),S(!1),N(!0);try{"VISION10"===v.trim().toUpperCase()?(S(!0),P(null)):(P("Invalid or expired code"),S(!1))}catch{P("Something went wrong"),S(!1)}finally{N(!1)}},disabled:!v||j,type:"button",children:j?"Applying...":"Apply"})]}),k&&(0,s.jsx)("div",{className:"text-red-400 text-xs mt-1",children:k}),z&&(0,s.jsx)("div",{className:"text-green-400 text-xs mt-1",children:"Discount applied!"})]}),(0,s.jsx)(n.$,{className:"w-full bg-gradient-to-r from-[#7f53ac] to-[#657ced] text-white py-3 rounded-md font-semibold shadow-glow border border-white/10 mt-2 flex items-center justify-center gap-2 text-lg tracking-wide",onClick:L,disabled:"processing"===y,style:{minHeight:33,fontFamily:"inherit"},children:(0,s.jsx)(c,{})}),(0,s.jsx)(n.$,{className:"w-full bg-gradient-to-r from-[#003087] to-[#0070ba] text-white py-3 rounded-md font-semibold shadow-glow border border-white/10 mt-2 flex items-center justify-center gap-2 text-lg tracking-wide",onClick:Z,disabled:"processing"===y,style:{minHeight:33,fontFamily:"inherit"},children:(0,s.jsx)(p,{})})]})})]})})})]})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26670:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(65239),a=r(48088),o=r(88170),i=r.n(o),n=r(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d={children:["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54787)),"/workspaces/OneVisions/src/app/checkout/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,75500)),"/workspaces/OneVisions/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/workspaces/OneVisions/src/app/checkout/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},42874:(e,t,r)=>{Promise.resolve().then(r.bind(r,1812))},43532:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var s=r(60687),a=r(43210),o=r(64190),i=r(98961),n=r(98698),l=r(33240),d=r(26203);let c=e=>{let t=(0,a.useRef)(null),[r]=(0,a.useState)(()=>{let e=d.To(new Float32Array(4500),{radius:1.2});return e.some(e=>Number.isNaN(e))&&console.error("Star positions contain NaN values!",e),e});return(0,o.D)((e,r)=>{t.current&&(t.current.rotation.x-=r/10,t.current.rotation.y-=r/15)}),(0,s.jsx)("group",{rotation:[0,0,Math.PI/4],children:(0,s.jsx)(n.ON,{ref:t,positions:r,stride:3,frustumCulled:!0,...e,children:(0,s.jsx)(l.q,{transparent:!0,color:"#a259ff",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},p=()=>(0,s.jsx)("div",{className:"w-full h-auto fixed inset-0 z-[20]",children:(0,s.jsx)(i.Hl,{camera:{position:[0,0,1]},children:(0,s.jsx)(a.Suspense,{fallback:null,children:(0,s.jsx)(c,{})})})})},54787:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/OneVisions/src/app/checkout/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/OneVisions/src/app/checkout/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},79551:e=>{"use strict";e.exports=require("url")},96018:(e,t,r)=>{Promise.resolve().then(r.bind(r,54787))}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,658,836,1,214],()=>r(26670));module.exports=s})();