(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var a=r(5155),s=r(2115),o=r(9434);let l=s.forwardRef((e,t)=>{let{className:r,variant:s="default",...l}=e;return(0,a.jsx)("button",{ref:t,className:(0,o.cn)("px-4 py-2 rounded transition-all font-semibold","ghost"===s&&"bg-transparent hover:bg-gray-100","outline"===s&&"border border-gray-300 bg-transparent hover:bg-gray-100","default"===s&&"bg-purple-600 text-white hover:bg-purple-700",r),...l})});l.displayName="Button"},4007:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(5155),s=r(2115),o=r(5695);let l=(0,r(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var i=r(285);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("input",{ref:t,className:"px-4 py-2 rounded border border-gray-300 bg-transparent text-white focus:outline-none focus:ring-2 focus:ring-purple-500 "+(r||""),...s})});n.displayName="Input";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("label",{ref:t,className:"block text-sm font-medium text-white "+(r||""),...s})});d.displayName="Label";let c=e=>{let{style:t}=e;return(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:14,height:14,padding:0,overflow:"visible"},children:(0,a.jsx)("img",{src:"/attached_assets/razorpay-icon.png",alt:"Razorpay Logo",style:{height:100,maxWidth:"none",display:"inline",verticalAlign:"middle",...t}})})},u=e=>{let{style:t}=e;return(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:14,height:14,padding:0,overflow:"visible"},children:(0,a.jsx)("img",{src:"/attached_assets/PayPal-Logo.wine.png",alt:"PayPal Logo",style:{height:70,maxWidth:"none",...t}})})};var p=r(5323),m=r(6408),h=r(6176),x=r(9509);let b=()=>{let e=(0,o.useRouter)(),{cart:t,removeFromCart:r,getTotalPrice:b}=(0,p._)(),[y,f]=(0,s.useState)(""),[g,w]=(0,s.useState)("idle"),[v,j]=(0,s.useState)(""),[N,k]=(0,s.useState)(!1),[S,C]=(0,s.useState)(null),[P,z]=(0,s.useState)(!1),[A,I]=(0,s.useState)(!1);(0,s.useEffect)(()=>{I(!0)},[]),(0,s.useEffect)(()=>{A&&0===t.length&&e.push("/products")},[A,t.length,e]);let _=e=>{r(e)},R=10*!!P,E=b(),O=Math.round(85.85*E),T=Math.round(R/100*E),U=Math.round(R/100*O),F=E-T,D=O-U,$=(E/100).toFixed(2),L=(T/100).toFixed(2),Z=(F/100).toFixed(2),M=()=>new Promise(e=>{if(document.getElementById("razorpay-script"))return e(!0);let t=document.createElement("script");t.id="razorpay-script",t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>e(!0),t.onerror=()=>e(!1),document.body.appendChild(t)}),J=e=>/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e),V=async()=>{if(!y||!J(y))return void alert("Please enter a valid email address.");if(w("processing"),!await M()){alert("Failed to load Razorpay SDK."),w("idle");return}try{let e=await fetch("/api/razorpay/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:D,currency:"INR",receipt:"receipt_".concat(Date.now()),email:y})}),r=await e.json();if(!e.ok)throw Error(r.message||"Order creation failed");let a={key:x.env.NEXT_PUBLIC_RAZORPAY_KEY_ID||"rzp_test_myXHywY5WTMuIg",amount:r.amount,currency:r.currency,name:"Vroom Visions",description:"Product Purchase",order_id:r.id,handler:async function(e){console.log("Razorpay payment success handler called",e);try{console.log("Sending invoice email..."),await fetch("/api/razorpay/invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y,amount:r.amount,currency:r.currency,product:t.map(e=>e.product.name).join(", "),invoiceId:r.id,paymentMethod:"Razorpay"})}),console.log("Invoice email sent!")}catch(e){console.error("Invoice email error:",e)}window.location.href="/payment-success?email=".concat(encodeURIComponent(y))},prefill:{email:y},theme:{color:"#a259ff"}};new window.Razorpay(a).open()}catch(e){alert(e.message||"Payment could not be processed"),w("idle")}},q=async()=>{if(!y||!J(y))return void alert("Please enter a valid email address.");w("processing");try{let e=await fetch("/api/paypal/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:F,currency:"USD",email:y})}),t=await e.json();if(!e.ok)throw Error(t.message||"Order creation failed");if(t.approvalUrl)window.location.href=t.approvalUrl;else throw Error("PayPal approval URL not received")}catch(e){alert(e.message||"Payment could not be processed"),w("idle")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"fixed inset-0 z-[-1]",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40 z-[1]"}),(0,a.jsxs)("video",{className:"absolute top-0 left-0 min-w-full min-h-full object-cover opacity-80",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,children:[(0,a.jsx)("source",{src:"/videos/blackhole.webm",type:"video/webm"}),"Your browser does not support the video tag."]})]}),(0,a.jsx)(h.A,{})]}),(0,a.jsx)(m.P.section,{className:"relative py-16",style:{marginTop:44},initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:(0,a.jsx)("div",{className:"container mx-auto px-4 relative z-10",children:0===t.length?null:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsxs)("div",{className:"bg-purple-900/20 backdrop-blur-md p-6 rounded-lg shadow-glow border border-white/10 sticky top-20",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Order Summary"}),(0,a.jsx)("div",{className:"border-b border-white/10 pb-4 mb-4",children:t.map(e=>(0,a.jsxs)("div",{className:"flex mb-4 p-2 rounded-lg bg-purple-950/40 backdrop-blur-sm border border-white/5",children:[(0,a.jsx)("img",{src:Array.isArray(e.product.imageUrl)?e.product.imageUrl[0]:e.product.imageUrl,alt:e.product.name,className:"w-20 h-20 rounded object-cover border border-white/10"}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:"font-medium",children:e.product.name}),(0,a.jsxs)("div",{className:"font-medium mt-1 text-white",children:["$",(e.product.price*e.quantity/100).toFixed(2)," USD"]})]}),(0,a.jsx)("button",{className:"ml-auto text-gray-400 hover:text-white hover:bg-red-500/20 p-1 rounded-full transition-colors",onClick:()=>_(e.product.id),children:(0,a.jsx)(l,{size:16})})]},e.product.id))}),(0,a.jsxs)("div",{className:"space-y-2 text-sm mb-4 p-3 rounded-lg bg-purple-950/40 backdrop-blur-sm border border-white/5",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{className:"font-medium",children:["$",$," USD"]})]}),P&&(0,a.jsxs)("div",{className:"flex justify-between text-green-400",children:[(0,a.jsx)("span",{children:"Discount (10%)"}),(0,a.jsxs)("span",{children:["- $",L," USD"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Taxes"}),(0,a.jsx)("span",{children:"Calculated at next step"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-bold text-lg p-3 rounded-lg bg-purple-950/40 backdrop-blur-sm border border-white/5 mt-4",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{className:"text-white",children:["$",P?Z:$," USD"]})]}),(0,a.jsx)("div",{className:"mt-4 text-xs text-gray-400",children:"By confirming your payment, you allow VroomVisionX LLC to charge you for this payment and future payments in accordance with their terms."})]})}),(0,a.jsx)("div",{className:"md:col-span-1 space-y-6",children:(0,a.jsxs)("div",{className:"bg-purple-900/20 backdrop-blur-md p-6 rounded-lg shadow-glow border border-white/10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Contact Information"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)(d,{htmlFor:"checkout-email",className:"block text-sm font-medium mb-1",children:"Email"}),(0,a.jsx)(n,{type:"email",id:"checkout-email",placeholder:"your@email.com",className:"w-full bg-purple-950/40 backdrop-blur-md border border-white/10 rounded-md px-4 py-2 focus:border-purple-500/50 shadow-glow focus:bg-purple-950/40",value:y,onChange:e=>{f(e.target.value),w("idle")}})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)(d,{htmlFor:"discount-code",className:"block text-sm font-medium mb-1",children:"Discount Code"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n,{type:"text",id:"discount-code",placeholder:"Enter code",className:"flex-1 bg-purple-950/40 backdrop-blur-md border border-white/10 rounded-md px-4 py-2 focus:border-purple-500/50 shadow-glow",value:v,onChange:e=>j(e.target.value)}),(0,a.jsx)(i.$,{className:"bg-purple-600/70 hover:bg-purple-600 text-white px-4 py-2 rounded-md shadow-glow border border-white/10",onClick:async()=>{C(null),z(!1),k(!0);try{"VISION10"===v.trim().toUpperCase()?(z(!0),C(null)):(C("Invalid or expired code"),z(!1))}catch(e){C("Something went wrong"),z(!1)}finally{k(!1)}},disabled:!v||N,type:"button",children:N?"Applying...":"Apply"})]}),S&&(0,a.jsx)("div",{className:"text-red-400 text-xs mt-1",children:S}),P&&(0,a.jsx)("div",{className:"text-green-400 text-xs mt-1",children:"Discount applied!"})]}),(0,a.jsx)(i.$,{className:"w-full bg-gradient-to-r from-[#7f53ac] to-[#657ced] text-white py-3 rounded-md font-semibold shadow-glow border border-white/10 mt-2 flex items-center justify-center gap-2 text-lg tracking-wide",onClick:V,disabled:"processing"===g,style:{minHeight:33,fontFamily:"inherit"},children:(0,a.jsx)(c,{})}),(0,a.jsx)(i.$,{className:"w-full bg-gradient-to-r from-[#003087] to-[#0070ba] text-white py-3 rounded-md font-semibold shadow-glow border border-white/10 mt-2 flex items-center justify-center gap-2 text-lg tracking-wide",onClick:q,disabled:"processing"===g,style:{minHeight:33,fontFamily:"inherit"},children:(0,a.jsx)(u,{})})]})})]})})})]})}},5323:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>l,_:()=>i});var a=r(5155),s=r(2115);let o=(0,s.createContext)(null),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{l(JSON.parse(e))}catch(e){console.error("Failed to parse cart from localStorage:",e)}},[]),(0,s.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(r))},[r]),(0,a.jsx)(o.Provider,{value:{cart:r,addToCart:e=>{l(t=>t.some(t=>t.product.id===e.id)?t:[...t,{product:e,quantity:1}])},removeFromCart:e=>{l(t=>t.filter(t=>t.product.id!==e))},updateQuantity:(e,t)=>{l(r=>r.map(r=>r.product.id===e?{...r,quantity:t}:r))},clearCart:()=>l([]),getTotalPrice:()=>r.reduce((e,t)=>e+t.product.price*t.quantity,0)},children:t})};function i(){let e=(0,s.useContext)(o);if(!e)throw Error("useCart must be used within a CartProvider");return e}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6176:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(5155),s=r(2115),o=r(1949),l=r(7558),i=r(5830),n=r(9107),d=r(4319);let c=e=>{let t=(0,s.useRef)(null),[r]=(0,s.useState)(()=>{let e=d.To(new Float32Array(4500),{radius:1.2});return e.some(e=>Number.isNaN(e))&&console.error("Star positions contain NaN values!",e),e});return(0,o.D)((e,r)=>{t.current&&(t.current.rotation.x-=r/10,t.current.rotation.y-=r/15)}),(0,a.jsx)("group",{rotation:[0,0,Math.PI/4],children:(0,a.jsx)(i.ON,{ref:t,positions:r,stride:3,frustumCulled:!0,...e,children:(0,a.jsx)(n.q,{transparent:!0,color:"#a259ff",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},u=()=>(0,a.jsx)("div",{className:"w-full h-auto fixed inset-0 z-[20]",children:(0,a.jsx)(l.Hl,{camera:{position:[0,0,1]},children:(0,a.jsx)(s.Suspense,{fallback:null,children:(0,a.jsx)(c,{})})})})},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var a=r(2596),s=r(9688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},9846:(e,t,r)=>{Promise.resolve().then(r.bind(r,4007))}},e=>{var t=t=>e(e.s=t);e.O(0,[831,367,413,277,649,165,441,684,358],()=>t(9846)),_N_E=e.O()}]);